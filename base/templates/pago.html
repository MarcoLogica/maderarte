{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Confirmar pago</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>

<style>
body {
    background-color: #f4f1f7;
    font-family: 'Quicksand', sans-serif;
    margin: 0;
    padding: 0;
}

.banner {
    background-color: #a3c9a8;
    color: white;
    padding: 1.5rem;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.banner h1 {
    margin: 0;
    font-size: 2rem;
}

.banner p {
    margin-top: 0.5rem;
    font-size: 1.1rem;
}

.lista-productos {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 2rem;
    background-color: #fff8f0;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 2rem;
    background-color: #fff;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

thead {
    background-color: #fce4ec;
}

th, td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid #eee;
    font-size: 1rem;
    color: #444;
}

th {
    color: #5d7052;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 0.95rem;
}

tr:hover {
    background-color: #fff7e6;
}

.total-carrito h3 {
    font-size: 1.4rem;
    color: #5d7052;
    text-align: right;
    margin-bottom: 2rem;
}

/* CONTENEDOR DE FORMULARIOS */
.contenedor-pago {
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    justify-content: space-between;
}

/* FORMULARIO COMPROBANTE */
.formulario-comprobante {
    flex: 1 1 480px;
}

.formulario-comprobante form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.formulario-comprobante label {
    font-weight: bold;
    color: #5d7052;
}

.formulario-comprobante input[type="file"] {
    padding: 0.8rem;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 1rem;
    background-color: #fff;
}

.formulario-comprobante button {
    background-color: #a3c9a8;
    color: white;
    padding: 0.8rem 1.2rem;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.formulario-comprobante button:hover {
    background-color: #8bbf91;
}

/* FORMULARIO CONTACTO */
.formulario-contacto {
    flex: 1 1 480px;
    background-color: #e8f5e9;
    padding: 1.5rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.formulario-contacto h3 {
    margin-top: 0;
    color: #2e7d32;
    font-size: 1.2rem;
    margin-bottom: 1rem;
}

.formulario-contacto form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.formulario-contacto input,
.formulario-contacto textarea {
    width: 100%;
    padding: 0.6rem;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 0.95rem;
    background-color: #fff;
}

/* BOT√ìN VOLVER */
.btn-volver {
    display: inline-block;
    margin: 2rem auto;
    text-decoration: none;
    background-color: #cfe8f3;
    color: #2c4f63;
    padding: 0.6rem 1.2rem;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1rem;
    transition: background-color 0.3s ease;
    text-align: center;
}

.btn-volver:hover {
    background-color: #b5d8e6;
}
</style>

<body>
    <header class="banner">
        <h1>Confirmaci√≥n de compra</h1>
        <p>Revisa tu pedido y adjunta el comprobante de pago</p>
    </header>

    <section class="lista-productos">
        <table>
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for producto in productos %}
                <tr>
                    <td>{{ producto.nombre }}</td>
                    <td>{{ producto.cantidad }}</td>
                    <td>${{ producto.subtotal }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="total-carrito">
            <h3>Total a pagar: ${{ total }}</h3>
        </div>

        <div class="contenedor-pago">
            <div class="formulario-comprobante">
              <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="contenedor-pago">
        <!-- FORMULARIO DE CONTACTO -->
        <div class="formulario-contacto">
            <h3>üìá Datos de contacto</h3>

            <label for="nombre">Nombre completo:</label>
            <input type="text" name="nombre" required>

            <label for="direccion">Direcci√≥n de env√≠o:</label>
            <textarea name="direccion" rows="2" required></textarea>

            <label for="correo_electronico">Correo electr√≥nico:</label>
            <input type="email" name="correo_electronico" required>

            <label for="telefono">Tel√©fono de contacto:</label>
            <input type="text" name="telefono" placeholder="Tel√©fono de contacto (opcional)">

        </div>

        <!-- FORMULARIO DE COMPROBANTE -->
        <div class="formulario-comprobante">
            <label for="comprobante">üìé Adjuntar comprobante de pago:</label>
            <input type="file" name="comprobante" required>
        </div>
    </div>

    <div style="text-align:center; margin-top:2rem;">
        <button type="submit">Enviar pago</button>
    </div>
</form>
            </div>
        </div>
    </section>

    <footer>
        <a href="{% url 'ver_carrito' %}" class="btn-volver">‚Üê Volver al carrito</a>
    </footer>
</body>
</html>